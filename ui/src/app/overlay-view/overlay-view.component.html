<!-- GenUI Background Layer - fills the entire 16:9 container -->
<div class="genui-container">
    <app-gen-ui-render></app-gen-ui-render>
</div>

<!-- Avatar and Chat Overlay Layer -->
<div class="overlay-container" 
     [class.position-left]="avatarPosition === 'left'" 
     [class.position-right]="avatarPosition === 'right'"
     *ngIf="avatarShow || chatShow">
    <div class="overlay-character" [ngClass]="action">
        <div class="overlay-pngtuber" 
             [ngClass]="action"
             *ngIf="avatarShow"
             #pngtuberElement></div>
        <div class="overlay-chat" *ngIf="chatShow">
<!--            <p class="ready-text" *ngIf="runMode=='starting'">System preparing...</p>-->
            @for (msg of chat; track msg.index) {
              <div class="chat-entry">
                <span class="timestamp">{{ msg.timestamp | date:'HH:mm:ss' }}</span>
                <span class="prefix" [style.color]="msg.display_color || getLogColor(msg.role)">{{ msg.display_name || msg.role }}</span>
                <span class="message">{{ msg.message }}</span>
              </div>
            }

        </div>
    </div>
</div>
